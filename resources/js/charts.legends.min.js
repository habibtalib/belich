!function(e,t){"function"==typeof define&&define.amd?define(["chartist"],function(a){return e.returnExportsGlobal=t(a)}):"object"==typeof exports?module.exports=t(require("chartist")):e["Chartist.plugins.legend"]=t(e.Chartist)}(this,function(e){"use strict";var t={className:"",classNames:!1,removeAll:!1,legendNames:!1,clickable:!0,onClick:null,position:"top"};return e.plugins=e.plugins||{},e.plugins.legend=function(a){if(a&&a.position){if(!("top"===a.position||"bottom"===a.position||a.position instanceof HTMLElement))throw Error("The position you entered is not a valid position");if(a.position instanceof HTMLElement){var n=a.position;delete a.position}}return a=e.extend({},t,a),n&&(a.position=n),function(t){var n;(n=t.container.querySelector(".ct-legend"))&&n.parentNode.removeChild(n);var s,i,l,o,r,c,d=((s=document.createElement("ul")).className="ct-legend",t instanceof e.Pie&&s.classList.add("ct-legend-inside"),"string"==typeof a.className&&a.className.length>0&&s.classList.add(a.className),t.options.width&&(s.style.cssText="width: "+t.options.width+"px;margin: 0 auto;"),s),u=t instanceof e.Pie&&t.data.labels&&t.data.labels.length,p=(i=u,a.legendNames||(i?t.data.labels:t.data.series)),f=function(e){for(var a=new Array(t.data.series.length),n=0;n<t.data.series.length;n++)a[n]={data:t.data.series[n],label:e?t.data.labels[n]:null,legend:-1};return a}(u),m=[],g=Array.isArray(a.classNames)&&a.classNames.length===p.length;p.forEach(function(e,t){var n,s,i,l,o=e.name||e,r=e.series||[t],c=(n=t,s=o,i=g,(l=document.createElement("li")).classList.add("ct-series-"+n),i&&l.classList.add(a.classNames[n]),l.setAttribute("data-legend",n),l.textContent=s,l);d.appendChild(c),r.forEach(function(e){f[e].legend=t}),m.push({text:o,series:r,active:!0})}),t.on("created",function(e){!function(e){if(a.position instanceof HTMLElement)a.position.insertBefore(e,null);else switch(a.position){case"top":t.container.insertBefore(e,t.container.childNodes[0]);break;case"bottom":t.container.insertBefore(e,null)}}(d)}),a.clickable&&(t.data.series=t.data.series.map(function(a,n){return"object"!=typeof a&&(a={value:a}),a.className=a.className||t.options.classNames.series+"-"+e.alphaNumerate(n),a}),o=m,r=f,c=u,(l=d).addEventListener("click",function(e){var n=e.target;if(n.parentNode===l&&n.hasAttribute("data-legend")){e.preventDefault();var s=parseInt(n.getAttribute("data-legend")),i=o[s];if(i.active){i.active=!1,n.classList.add("inactive");var d=o.filter(function(e){return e.active}).length;if(!a.removeAll&&0==d)for(var u=0;u<o.length;u++)o[u].active=!0,l.childNodes[u].classList.remove("inactive")}else i.active=!0,n.classList.remove("inactive");var p=[],f=[];for(u=0;u<r.length;u++)-1!=r[u].legend&&o[r[u].legend].active&&(p.push(r[u].data),f.push(r[u].label));t.data.series=p,c&&(t.data.labels=f),t.update(),a.onClick&&a.onClick(t,e)}}))}},e.plugins.legend});
